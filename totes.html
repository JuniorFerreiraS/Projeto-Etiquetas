<!DOCTYPE html>
<html>
<body style="background-color:#FFE600">   
<center>
    
		<h2> Correção de Totes </h2>
		<BR>
<p>IP Impressora:</p>

<p id="demo"></p>
<input type="text" id="ip_addr" class="input" placeholder="IP">
<p>Tote:</p>
<input id="tote" type="text" id="tote" class="input" placeholder="qr tote...">
<br>
<button id="enviar" class="input" onclick="print(); return false;">Imprimir</button>
<BR>
    <BR>
        <img src="etiqueta tote.png"width="178px" height="305px">

<script src="https://code.jquery.com/jquery-2.2.4.js"></script>

<script>
  $('#tote').keyup(function(){
      if(this.value.length ==16){
      $('#enviar').click();
      }
  });
</script>
<script>
	function print()

			{ 
			var tote = document.getElementById("tote").value;
			const myArray = tote.split("-");
			var sigla = myArray[4];
	var ip_addr = document.getElementById("ip_addr").value;
	var zpl = "^XA^PW812^FO0,0^GFA,38400,38400,00100,:Z64:eJzs1TFug0AUBFAQhUuO4KP4aHC0HMVHSJkCeWMMa1CaRBFjN28aGmufd/+wNI2IiIjIn3MqiXztiT5ClDLtjBBRykf4pOZsG7nEjJI/qu2wuqDxGR/HVt9z0LjlR/4c+pA0xnitarGStarFStaqFqsvP27IwzL/+6lWd/rlx/9NX8t7N64ho6nGZXdzHZ269hA7qsdhjfNzu7iOT7e+IMFxNO1itPsv4uFZNtAGRz4PfTa65/2byPkx7FOwVnOxFiNzkSxZVu/DxtTU3aTSrcY1aLQP45x8Pe7GLW40qzEmjWE2LmGjvMxIEsvyQ9oYX2Qkr921tgxGwoh+zhkMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPxBuMbAAD//+2dsRWAIAwFCwtLR2AURsPRGMkNkGcM2lrcLzCpqDgh8VNeMIIRjGAE4wtjFi9ZMH7ImMQHqXBnXiCuZJ7RBDN0blmSYY5chetX4yzm3csKh7TCha1weivc5ArHusIVL3HeF3CwtmaJm8Gm+94JbEi7f4zOoC5rc0ZfgGWfv6IMC8MFZRzeGLCqMQrJ2I2RScY9YQlE+LtBDpa/seRgjbgFGdUZmWOMWOEa8gpCjFEfBhWLdowTKZbKrQ==:A930^FT99,338^BQN,2,10^FH\^FDLA,"+tote+"^FS^FT644,358^A0B,32,31^FH\^FD"+tote+"^FS^FT769,307^A0B,104,96^FH\^FDTOTE^FS^FT551,342^A0B,192,194^FH\^FD"+sigla+"^FS^PQ1,0,1,Y^XZ";
	var url = "http://"+ip_addr+":9100/pstprnt";
				var method = "POST";
				var async = true;
				var request = new XMLHttpRequest();
	
				request.onload = function () {
					var status = request.status; 
					var data = request.responseText; 
					output.innerHTML = "Status: " + status + "<br>" + data;
				}
	
				request.open(method, url, async);
				request.setRequestHeader("Content-Length", zpl.length);
	
				
				request.send(zpl);
			}
		</script>

</body>
</html>
