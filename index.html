<!DOCTYPE html>
<html>
<body style="background-color:gold">
    
<center></cebter>
    <img src="Logotipo_MercadoLivre.png">
    <br>
	
<a name="usuarios.html">ir para pagina usuarios</p>

	<br>
		<h2> Etiquetagem de endereços </h2>
		<BR>
        <img src="B continuo.png">

<p>IP Impressora:</p>

<p id="demo"></p>

<input type="text" id="ip_addr" class="input" placeholder="IP">
<p>Endereço:</p>
<input type="text" id="adress" class="input" placeholder="adress">
<br>
<br>
<button  class="input" onclick="print(); return false;">Imprimir</button>
<BR>
	<BR>
    <img src="modelo etiqueta.png"width="321px" height="207px">
<script>


	function print()

			{ 
				var adress = document.getElementById("adress").value
				const myArray = adress.split("-");
				var piso = myArray[1];
				var rua = myArray[2];
				var predio = myArray[3];
				var nivel = myArray[4];
				var apto = myArray[5];
				var ip_addr = document.getElementById("ip_addr").value;
				var zpl = "^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR6,6~SD15^JUS^LRN^CI0^XZ^XA^MMT^PW831^LL0432^LS0^FO57,32^GB96,40,40^FS^FT57,64^A0N,32,67^FB96,1,0,C^FR^FH\^FD ^FS^FO57,72^GB96,40,40^FS^FT57,104^A0N,32,67^FB96,1,0,C^FR^FH\^FD"+ rua +"^FS^FO62,32^GB82,26,26^FS^FT62,52^A0N,21,45^FB82,1,0,C^FR^FH\^FDRUA^FS^FT161,184^A0N,47,45^FH\^FDPREDIO^FS^FT33,368^A0N,197,256^FH\^FD"+ predio +"^FS^FT548,369^BQN,2,10^FH\^FDLA,"+ adress +"^FS^FT521,377^A0N,29,24^FH\^FD"+ adress +"^FS^FO367,32^GB90,41,41^FS^FT367,64^A0N,33,93^FB90,1,0,C^FR^FH\^FD ^FS^FO367,73^GB90,41,41^FS^FT367,105^A0N,33,93^FB90,1,0,C^FR^FH\^FD"+ nivel +"^FS^FO369,32^GB86,26,26^FS^FT369,52^A0N,21,36^FB86,1,0,C^FR^FH\^FDNIVEL^FS^FO676,32^GB86,37,37^FS^FT676,61^A0N,30,88^FB86,1,0,C^FR^FH\^FD ^FS^FO676,69^GB86,37,37^FS^FT676,98^A0N,30,88^FB86,1,0,C^FR^FH\^FD"+ apto +"^FS^FO679,32^GB79,24,24^FS^FT679,51^A0N,20,36^FB79,1,0,C^FR^FH\^FDAPTO^FS^PQ1,0,1,Y^XZ";
				var url = "http://"+ip_addr+":9100/pstprnt";
				var method = "POST";
				var async = true;
				var request = new XMLHttpRequest();
	
				request.onload = function () {
					var status = request.status; 
					var data = request.responseText; 
					output.innerHTML = "Status: " + status + "<br>" + data;
				}
	
				request.open(method, url, async);
				request.setRequestHeader("Content-Length", zpl.length);
	
				
				request.send(zpl);
			}
		</script>

</body>
</html>
